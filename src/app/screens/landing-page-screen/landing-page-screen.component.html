<div class="landing-page">
    <!-- Navbar simple (logo + login/registro) -->
    <header>
        <app-navbar></app-navbar>
    </header>

    <main class="page container py-4">

        <!-- Hero de bienvenida -->
        <section class="mb-4">
        <div class="row align-items-center">
            <div class="col-md-7">
            <h1 class="mb-3">Bienvenido a EduPlan</h1>
            <p class="mb-3">
                EduPlan es un sistema de gestión académica que facilita la
                planeación de horarios de grupos, aulas y docentes, optimizando el
                uso de espacios y permitiendo visualizar rápidamente el estado del
                periodo académico actual.
            </p>
            <p class="mb-4">
                Desde aquí podrás consultar la información del periodo en curso,
                revisar el uso de aulas y docencia, y acceder al sistema para
                administrar o registrar usuarios.
            </p>
            </div>

            <div class="col-md-5 mt-4 mt-md-0">
            <div class="card">
                <div class="card-header">
                <strong>Estado general del sistema</strong>
                </div>
                <div class="card-body">
                <ng-container *ngIf="loading">
                    <p class="mb-0">Cargando resumen del periodo...</p>
                </ng-container>

                <ng-container *ngIf="error">
                    <p class="mb-0 text-danger">
                    {{ error }}
                    </p>
                </ng-container>

                <ng-container *ngIf="!loading && !error && !summary">
                    <p class="mb-0">
                    No hay un periodo académico activo actualmente.
                    </p>
                </ng-container>

                <ng-container *ngIf="summary">
                    <p class="mb-1">
                    <strong>Periodo activo:</strong>
                    {{ summary.periodo_activo?.nombre }}
                    </p>
                    <p class="mb-1">
                    <strong>Fechas:</strong>
                    {{ summary.periodo_activo?.fecha_inicio }} –
                    {{ summary.periodo_activo?.fecha_fin }}
                    </p>
                    <p class="mb-0">
                    <strong>Estado:</strong>
                    {{ summary.periodo_activo?.estado }}
                    </p>
                </ng-container>
                </div>
            </div>
            </div>
        </div>
        </section>

        <!-- Tarjetas de métricas del periodo -->
        <section *ngIf="summary" class="mb-4">
        <h2 class="mb-3">Resumen del periodo académico</h2>
        <div class="row g-3">
            <div class="col-sm-6 col-md-3">
            <div class="card h-100">
                <div class="card-body text-center">
                <h5 class="card-title mb-1">Grupos con horario</h5>
                <p class="display-6 mb-0">
                    {{ summary.total_grupos_con_horario }}
                </p>
                </div>
            </div>
            </div>

            <div class="col-sm-6 col-md-3">
            <div class="card h-100">
                <div class="card-body text-center">
                <h5 class="card-title mb-1">Aulas usadas</h5>
                <p class="display-6 mb-0">
                    {{ summary.total_aulas_usadas }}
                </p>
                </div>
            </div>
            </div>

            <div class="col-sm-6 col-md-3">
            <div class="card h-100">
                <div class="card-body text-center">
                <h5 class="card-title mb-1">Docentes con horario</h5>
                <p class="display-6 mb-0">
                    {{ summary.total_docentes_con_horario }}
                </p>
                </div>
            </div>
            </div>

            <div class="col-sm-6 col-md-3">
            <div class="card h-100">
                <div class="card-body text-center">
                <h5 class="card-title mb-1">Aulas disponibles</h5>
                <p class="display-6 mb-0">
                    {{ summary.aulas_disponibles }}
                </p>
                </div>
            </div>
            </div>
        </div>
        </section>

        <!-- Gráficas del periodo (basadas en /public/summary/) -->
        <section *ngIf="summary" class="mb-4">
        <div class="row g-3">

            <!-- Barra: resumen general -->
            <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header">
                <strong>Distribución general del periodo</strong>
                </div>
                <div class="card-body d-flex justify-content-center">
                <canvas
                    baseChart
                    type="bar"
                    [data]="barSummaryData"
                    [options]="barSummaryOptions"
                    [plugins]="barSummaryPlugins"
                ></canvas>
                </div>
            </div>
            </div>

            <!-- Doughnut: uso de aulas -->
            <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header">
                <strong>Uso de aulas</strong>
                </div>
                <div class="card-body d-flex justify-content-center">
                <canvas
                    baseChart
                    type="doughnut"
                    [data]="doughnutAulasData"
                    [options]="doughnutAulasOptions"
                    [plugins]="doughnutAulasPlugins"
                ></canvas>
                </div>
            </div>
            </div>

        </div>
        </section>

    </main>
</div>
