<section class="login">
  <div class="wrapper">
    <div class="section-right">
      <div class="glass-card">
        <div class="card-body">
          <h3 class="title">CAMBIAR CONTRASEÑA</h3>

          <!-- Error general de la API -->
          <div *ngIf="errors.api" class="alert alert-danger mt-2">
            {{ errors.api }}
          </div>

          <div class="container-inputs">
            <!-- Contraseña actual -->
            <div class="input-group-custom">
              <label for="current_password" class="form-label">Contraseña actual</label>
              <div class="glass-input-wrapper">
                <input
                  [type]="typeCurrent"
                  [(ngModel)]="currentPassword"
                  id="current_password"
                  placeholder="Ingresa tu contraseña actual"
                >
              </div>
              <i
                class="bi eye-toggle"
                [ngClass]="typeCurrent === 'password' ? 'bi-eye-fill' : 'bi-eye-slash-fill'"
                (click)="toggleCurrent()"
              ></i>
              <div *ngIf="errors.current_password" class="invalid-feedback">
                {{ errors.current_password }}
              </div>
            </div>

            <!-- Nueva contraseña -->
            <div class="input-group-custom">
              <label for="new_password" class="form-label">Nueva contraseña</label>
              <div class="glass-input-wrapper">
                <input
                  [type]="typeNew"
                  [(ngModel)]="newPassword"
                  id="new_password"
                  placeholder="Ingresa tu nueva contraseña"
                >
              </div>
              <i
                class="bi eye-toggle"
                [ngClass]="typeNew === 'password' ? 'bi-eye-fill' : 'bi-eye-slash-fill'"
                (click)="toggleNew()"
              ></i>
              <div *ngIf="errors.new_password" class="invalid-feedback">
                {{ errors.new_password }}
              </div>
            </div>

            <!-- Confirmar nueva contraseña -->
            <div class="input-group-custom">
              <label for="confirm_password" class="form-label">Confirmar nueva contraseña</label>
              <div class="glass-input-wrapper">
                <input
                  [type]="typeConfirm"
                  [(ngModel)]="confirmPassword"
                  id="confirm_password"
                  placeholder="Confirma tu nueva contraseña"
                  (keyup.enter)="changePassword()"
                >
              </div>
              <i
                class="bi eye-toggle"
                [ngClass]="typeConfirm === 'password' ? 'bi-eye-fill' : 'bi-eye-slash-fill'"
                (click)="toggleConfirm()"
              ></i>
              <div *ngIf="errors.confirm_password" class="invalid-feedback">
                {{ errors.confirm_password }}
              </div>
            </div>

            <!-- Botones -->
            <div class="section-buttons">
              <button
                class="btn btn-secondary"
                type="button"
                (click)="cancelar()"
              >
                Cancelar
              </button>

              <button
                class="btn btn-primary"
                type="button"
                (click)="changePassword()"
                [disabled]="load"
              >
                {{ load ? 'Guardando...' : 'Cambiar contraseña' }}
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>
